!function(a){if("function"==typeof define&&define.amd)define(["jquery"],a);else if("object"==typeof module&&module.exports){var b=require("jquery");a(b),module.exports=b}else a(jQuery)}(function(a){function b(a){this.init(a)}b.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"#f2fa05",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",insertMode:"prepend",constructor:b,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(b){a.extend(this,b),this.radius=this.size/2,this.initWidget(),this.initFill(),this.draw(),this.el.trigger("circle-inited")},initWidget:function(){this.canvas||(this.canvas=a("<canvas>")["prepend"==this.insertMode?"prependTo":"appendTo"](this.el)[0]);var b=this.canvas;if(b.width=this.size,b.height=this.size,this.ctx=b.getContext("2d"),window.devicePixelRatio>1){var c=window.devicePixelRatio;b.style.width=b.style.height=this.size+"px",b.width=b.height=this.size*c,this.ctx.scale(c,c)}},initFill:function(){var e,n=this,b=this.fill,i=this.ctx,f=this.size;if(!b)throw Error("The fill is not specified!");if("string"==typeof b&&(b={color:b}),b.color&&(this.arcFill=b.color),b.gradient){var c=b.gradient;if(1==c.length)this.arcFill=c[0];else if(c.length>1){for(var g=b.gradientAngle||0,m=b.gradientDirection||[f/2*(1-Math.cos(g)),f/2*(1+Math.sin(g)),f/2*(1+Math.cos(g)),f/2*(1-Math.sin(g))],j=i.createLinearGradient.apply(i,m),h=0;h<c.length;h++){var d=c[h],k=h/(c.length-1);a.isArray(d)&&(k=d[1],d=d[0]),j.addColorStop(k,d)}this.arcFill=j}}function l(){var b=a("<canvas>")[0];b.width=n.size,b.height=n.size,b.getContext("2d").drawImage(e,0,0,f,f),n.arcFill=n.ctx.createPattern(b,"no-repeat"),n.drawFrame(n.lastFrameValue)}b.image&&(b.image instanceof Image?e=b.image:(e=new Image).src=b.image,e.complete?l():e.onload=l)},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(a){this.lastFrameValue=a,this.ctx.clearRect(0,0,this.size,this.size),this.drawEmptyArc(a),this.drawArc(a)},drawArc:function(d){if(0!==d){var a=this.ctx,b=this.radius,e=this.getThickness(),c=this.startAngle;a.save(),a.beginPath(),this.reverse?a.arc(b,b,b-e/2,c-2*Math.PI*d,c):a.arc(b,b,b-e/2,c,c+2*Math.PI*d),a.lineWidth=e,a.lineCap=this.lineCap,a.strokeStyle=this.arcFill,a.stroke(),a.restore()}},drawEmptyArc:function(c){var a=this.ctx,b=this.radius,d=this.getThickness(),e=this.startAngle;c<1&&(a.save(),a.beginPath(),c<=0?a.arc(b,b,b-d/2,0,2*Math.PI):this.reverse?a.arc(b,b,b-d/2,e,e-2*Math.PI*c):a.arc(b,b,b-d/2,e+2*Math.PI*c,e),a.lineWidth=d,a.strokeStyle=this.emptyFill,a.stroke(),a.restore())},drawAnimated:function(d){var e=this,c=this.el,b=a(this.canvas);b.stop(!0,!1),c.trigger("circle-animation-start"),b.css({animationProgress:0}).animate({animationProgress:1},a.extend({},this.animation,{step:function(a){var b=e.animationStartValue*(1-a)+d*a;e.drawFrame(b),c.trigger("circle-animation-progress",[a,b])}})).promise().always(function(){c.trigger("circle-animation-end")})},getThickness:function(){return a.isNumeric(this.thickness)?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(a){this.animation&&(this.animationStartValue=this.lastFrameValue),this.value=a,this.draw()}},a.circleProgress={defaults:b.prototype},a.easing.circleProgressEasing=function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},a.fn.circleProgress=function(d,e){var f="circle-progress",c=this.data(f);if("widget"==d){if(!c)throw Error('Calling "widget" method on not initialized instance is forbidden');return c.canvas}if("value"==d){if(!c)throw Error('Calling "value" method on not initialized instance is forbidden');if(void 0===e)return c.getValue();var g=arguments[1];return this.each(function(){a(this).data(f).setValue(g)})}return this.each(function(){var e=a(this),g=e.data(f),h=a.isPlainObject(d)?d:{};if(g)g.init(h);else{var c=a.extend({},e.data());"string"==typeof c.fill&&(c.fill=JSON.parse(c.fill)),"string"==typeof c.animation&&(c.animation=JSON.parse(c.animation)),(h=a.extend(c,h)).el=e,g=new b(h),e.data(f,g)}})}})